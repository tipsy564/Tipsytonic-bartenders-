<!DOCTYPE html>
<html>
<head>
  <title>MIRA â€“ Mobile Assistant</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      background: black;
      color: #00aaff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding-top: 80px;
    }
    button {
      background: #00aaff;
      color: black;
      border: none;
      padding: 16px 28px;
      font-size: 18px;
      border-radius: 50px;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>MIRA</h1>
<p id="text">Tap the button and speak</p>
<button onclick="startListening()">ðŸŽ™ Talk to Mira</button>

<script>
/* =========================
   SPEECH SETUP
========================= */
const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

if (!SpeechRecognition) {
  alert("Use Google Chrome. Speech Recognition not supported.");
}

const recognition = new SpeechRecognition();
recognition.lang = "en-IN";
recognition.continuous = false;
recognition.interimResults = false;

function speak(message) {
  window.speechSynthesis.cancel();
  const speech = new SpeechSynthesisUtterance(message);
  speech.lang = "en-IN";
  speech.rate = 1;
  window.speechSynthesis.speak(speech);
}

function startListening() {
  speak("I am listening, Sir");
  setTimeout(() => recognition.start(), 300);
}

/* =========================
   MIRA INTELLIGENCE
========================= */
function processCommand(command) {
  const cmd = command.toLowerCase();

  // Greetings
  if (cmd.includes("hello") || cmd.includes("hi") || cmd.includes("hey")) {
    return greet();
  }

  if (cmd.includes("how are you")) {
    return "I am functioning perfectly, Sir.";
  }

  // Time & Date
  if (cmd.includes("time")) {
    return getTime();
  }

  if (cmd.includes("date")) {
    return getDate();
  }

  if (cmd.includes("day")) {
    return getDay();
  }

  // Identity
  if (cmd.includes("who are you") || cmd.includes("your name")) {
    return "I am Mira, your mobile voice assistant, Sir.";
  }

  if (cmd.includes("help")) {
    return "I can tell time, date, open websites, search Google, flip a coin, and roll a dice.";
  }

  // Open websites
  if (cmd.includes("open google")) {
    window.open("https://www.google.com", "_blank");
    return "Opening Google, Sir.";
  }

  if (cmd.includes("open youtube")) {
    window.open("https://www.youtube.com", "_blank");
    return "Opening YouTube, Sir.";
  }

  // Search
  if (cmd.startsWith("search")) {
    const query = cmd.replace("search", "").trim();
    if (query) {
      window.open("https://www.google.com/search?q=" + encodeURIComponent(query), "_blank");
      return "Searching for " + query + ", Sir.";
    }
    return "What should I search for, Sir?";
  }

  // Utilities
  if (cmd.includes("flip a coin")) {
    return Math.random() < 0.5 ? "Heads, Sir." : "Tails, Sir.";
  }

  if (cmd.includes("roll a dice")) {
    return "You rolled a " + (Math.floor(Math.random() * 6) + 1) + ", Sir.";
  }

  // Goodbye
  if (cmd.includes("bye")) {
    return "Goodbye, Sir. I will be here.";
  }

  return "I did not understand that, Sir. Please try again.";
}

/* =========================
   HELPER FUNCTIONS
========================= */
function greet() {
  const hour = new Date().getHours();
  if (hour < 12) return "Good morning, Sir.";
  if (hour < 18) return "Good afternoon, Sir.";
  return "Good evening, Sir.";
}

function getTime() {
  const now = new Date();
  return "The time is " + now.toLocaleTimeString("en-IN", {
    hour: "numeric",
    minute: "2-digit"
  }) + ", Sir.";
}

function getDate() {
  return "Today is " + new Date().toDateString() + ", Sir.";
}

function getDay() {
  return "Today is " + new Date().toLocaleDateString("en-IN", { weekday: "long" }) + ", Sir.";
}

/* =========================
   SPEECH RESULT
========================= */
recognition.onresult = function(event) {
  const command = event.results[0][0].transcript;
  document.getElementById("text").innerText = "You: " + command;

  const response = processCommand(command);
  speak(response);
};
</script>

</body>
</html>
